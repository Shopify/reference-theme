!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).EmblaCarouselFade=t()}(this,(function(){"use strict";function n(n,t,e){return Math.min(Math.max(n,t),e)}function t(n){return"number"==typeof n&&!isNaN(n)}function e(e={}){const o=1,i=0,r=.68,s=1e3/60;let l,c,a,f,d=[],u=0,p=0,g=0,y=!1;function E(){v(l.selectedScrollSnap(),o)}function S(){y=!1}function h(){y=!1,u=0,p=0}function m(){const n=l.internalEngine().scrollBody.duration();p=n?0:o,y=!0,n||E()}function b(n){const{scrollSnaps:e,location:o,target:i}=l.internalEngine();!t(n)||d[n]<.5||(o.set(e[n]),i.set(o))}function v(t,e){l.scrollSnapList().forEach(((r,s)=>{const c=Math.abs(e),a=d[s],f=s===t,p=n(f?a+c:a-c,i,o);d[s]=p;const E=f&&y,S=l.previousScrollSnap();E&&(d[S]=1-p),f&&function(n,t){const{index:e,dragHandler:o,scrollSnaps:i}=l.internalEngine(),r=o.pointerDown(),s=1/(i.length-1);let c=n,a=r?l.selectedScrollSnap():l.previousScrollSnap();if(r&&c===a){const n=-1*Math.sign(u);c=a,a=e.clone().set(a).add(n).get()}const f=a*s,d=(c-a)*s;g=f+d*t}(t,p),function(n){const t=l.internalEngine().slideRegistry[n],{scrollSnaps:e,containerRect:o}=l.internalEngine(),r=d[n];t.forEach((t=>{const s=l.slideNodes()[t].style,c=parseFloat(r.toFixed(2)),a=c>i,f=function(n){const{axis:t}=l.internalEngine();return`translate${t.scroll.toUpperCase()}(${t.direction(n)}px)`}(a?e[n]:o.width+2);a&&(s.transform=f),s.opacity=c.toString(),s.pointerEvents=r>.5?"auto":"none",a||(s.transform=f)}))}(s)}))}function x(){const{dragHandler:n,index:t,scrollBody:e}=l.internalEngine(),o=l.selectedScrollSnap();if(!n.pointerDown())return o;const i=Math.sign(e.velocity()),r=Math.sign(u),s=t.clone().set(o).add(-1*i).get();return i&&r?r===i?s:o:null}function M(){const{target:n,location:e}=l.internalEngine(),i=n.get()-e.get(),a=Math.abs(i)>=1,f=x(),g=!t(f);return function(n){const{dragHandler:e,scrollBody:i}=n.internalEngine(),l=s/1e3,a=e.pointerDown(),f=i.velocity()*l,g=i.duration(),y=x(),E=!t(y);if(a){if(!f)return;u+=f,p=Math.abs(f/c),b(y)}if(!a){if(!g||E)return;p+=(o-d[y])/g,p*=r}E||v(y,p)}(l),!g&&!a&&d[f]>.999}function w(){return g}return{name:"fade",options:e,init:function(t){l=t;const e=l.selectedScrollSnap(),{scrollBody:r,containerRect:s,axis:u}=l.internalEngine(),p=u.measureSize(s);c=n(.75*p,200,500),y=!1,d=l.scrollSnapList().map(((n,t)=>t===e?o:i)),a=r.settled,f=l.scrollProgress,r.settled=M,l.scrollProgress=w,l.on("select",m).on("slideFocus",E).on("pointerDown",h).on("pointerUp",S),function(){const{translate:n,slideLooper:t}=l.internalEngine();n.clear(),n.toggleActive(!1),t.loopPoints.forEach((({translate:n})=>{n.clear(),n.toggleActive(!1)}))}(),E()},destroy:function(){const{scrollBody:n}=l.internalEngine();n.settled=a,l.scrollProgress=f,l.off("select",m).off("slideFocus",E).off("pointerDown",h).off("pointerUp",S),l.slideNodes().forEach((n=>{const t=n.style;t.opacity="",t.transform="",t.pointerEvents="",n.getAttribute("style")||n.removeAttribute("style")}))}}}return e.globalOptions=void 0,e}));